<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.migu.income.dao.MiguProjectBudgetMapper">
  <resultMap id="BaseResultMap" type="cn.migu.income.pojo.MiguProjectBudget">
    <result column="PROJECT_ID" jdbcType="VARCHAR" property="projectId" />
    <result column="BUDGET_YEAR" jdbcType="VARCHAR" property="budgetYear" />
    <result column="BUDGET_DEPT_DRAW" jdbcType="VARCHAR" property="budgetDeptDraw" />
    <result column="BUDGET_DEPT_USE" jdbcType="VARCHAR" property="budgetDeptUse" />
    <result column="BUDGET_PROJECT_NUMBER" jdbcType="VARCHAR" property="budgetProjectNumber" />
    <result column="BUDGET_PROJECT_NAME" jdbcType="VARCHAR" property="budgetProjectName" />
    <result column="BUDGET_SUBJECT_CODE" jdbcType="VARCHAR" property="budgetSubjectCode" />
    <result column="BUDGET_AVAILABLE_AMOUNT" jdbcType="DECIMAL" property="budgetAvailableAmount" />
    <result column="BUDGET_TOTAL_AMOUNT" jdbcType="DECIMAL" property="budgetTotalAmount" />
    <result column="BUDGET_RESULT_ID" jdbcType="VARCHAR" property="budgetResultId" />
  </resultMap>
  <sql id="Base_Column_List">
   
    PROJECT_ID, BUDGET_YEAR, BUDGET_DEPT_DRAW, BUDGET_DEPT_USE, BUDGET_PROJECT_NUMBER, 
    BUDGET_PROJECT_NAME, BUDGET_SUBJECT_CODE, BUDGET_AVAILABLE_AMOUNT, BUDGET_TOTAL_AMOUNT, 
    BUDGET_RESULT_ID
  </sql>
  
  
  <insert id="insert" parameterType="cn.migu.income.pojo.MiguProjectBudget">
   
    insert into T_MIGU_PROJECT_BUDGET (PROJECT_ID, BUDGET_YEAR, BUDGET_DEPT_DRAW, 
      BUDGET_DEPT_USE, BUDGET_PROJECT_NUMBER, BUDGET_PROJECT_NAME, 
      BUDGET_SUBJECT_CODE, BUDGET_AVAILABLE_AMOUNT, 
      BUDGET_TOTAL_AMOUNT, BUDGET_RESULT_ID)
    values (#{projectId,jdbcType=VARCHAR}, #{budgetYear,jdbcType=VARCHAR}, #{budgetDeptDraw,jdbcType=VARCHAR}, 
      #{budgetDeptUse,jdbcType=VARCHAR}, #{budgetProjectNumber,jdbcType=VARCHAR}, #{budgetProjectName,jdbcType=VARCHAR}, 
      #{budgetSubjectCode,jdbcType=VARCHAR}, #{budgetAvailableAmount,jdbcType=DECIMAL}, 
      #{budgetTotalAmount,jdbcType=DECIMAL}, #{budgetResultId,jdbcType=VARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="cn.migu.income.pojo.MiguProjectBudget">
  
    insert into T_MIGU_PROJECT_BUDGET
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="projectId != null">
        PROJECT_ID,
      </if>
      <if test="budgetYear != null">
        BUDGET_YEAR,
      </if>
      <if test="budgetDeptDraw != null">
        BUDGET_DEPT_DRAW,
      </if>
      <if test="budgetDeptUse != null">
        BUDGET_DEPT_USE,
      </if>
      <if test="budgetProjectNumber != null">
        BUDGET_PROJECT_NUMBER,
      </if>
      <if test="budgetProjectName != null">
        BUDGET_PROJECT_NAME,
      </if>
      <if test="budgetSubjectCode != null">
        BUDGET_SUBJECT_CODE,
      </if>
      <if test="budgetAvailableAmount != null">
        BUDGET_AVAILABLE_AMOUNT,
      </if>
      <if test="budgetTotalAmount != null">
        BUDGET_TOTAL_AMOUNT,
      </if>
      <if test="budgetResultId != null">
        BUDGET_RESULT_ID,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="projectId != null">
        #{projectId,jdbcType=VARCHAR},
      </if>
      <if test="budgetYear != null">
        #{budgetYear,jdbcType=VARCHAR},
      </if>
      <if test="budgetDeptDraw != null">
        #{budgetDeptDraw,jdbcType=VARCHAR},
      </if>
      <if test="budgetDeptUse != null">
        #{budgetDeptUse,jdbcType=VARCHAR},
      </if>
      <if test="budgetProjectNumber != null">
        #{budgetProjectNumber,jdbcType=VARCHAR},
      </if>
      <if test="budgetProjectName != null">
        #{budgetProjectName,jdbcType=VARCHAR},
      </if>
      <if test="budgetSubjectCode != null">
        #{budgetSubjectCode,jdbcType=VARCHAR},
      </if>
      <if test="budgetAvailableAmount != null">
        #{budgetAvailableAmount,jdbcType=DECIMAL},
      </if>
      <if test="budgetTotalAmount != null">
        #{budgetTotalAmount,jdbcType=DECIMAL},
      </if>
      <if test="budgetResultId != null">
        #{budgetResultId,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
 
  <update id="updateBySelective" parameterType="cn.migu.income.pojo.MiguProjectBudget">
  
    update T_MIGU_PROJECT_BUDGET
    <set>
      <if test="projectId != null">
        PROJECT_ID = #{projectId,jdbcType=VARCHAR},
      </if>
      <if test=" budgetYear != null">
        BUDGET_YEAR = #{budgetYear,jdbcType=VARCHAR},
      </if>
      <if test=" budgetDeptDraw != null">
        BUDGET_DEPT_DRAW = #{ budgetDeptDraw,jdbcType=VARCHAR},
      </if>
      <if test=" budgetDeptUse != null">
        BUDGET_DEPT_USE = #{ budgetDeptUse,jdbcType=VARCHAR},
      </if>
      <if test=" budgetProjectNumber != null">
        BUDGET_PROJECT_NUMBER = #{ budgetProjectNumber,jdbcType=VARCHAR},
      </if>
      <if test=" budgetProjectName != null">
        BUDGET_PROJECT_NAME = #{ budgetProjectName,jdbcType=VARCHAR},
      </if>
      <if test=" budgetSubjectCode != null">
        BUDGET_SUBJECT_CODE = #{ budgetSubjectCode,jdbcType=VARCHAR},
      </if>
      <if test=" budgetAvailableAmount != null">
        BUDGET_AVAILABLE_AMOUNT = #{ budgetAvailableAmount,jdbcType=DECIMAL},
      </if>
      <if test=" budgetTotalAmount != null">
        BUDGET_TOTAL_AMOUNT = #{ budgetTotalAmount,jdbcType=DECIMAL},
      </if>
    </set>
   		where BUDGET_RESULT_ID = #{ budgetResultId,jdbcType=VARCHAR}
  </update>
  
  <select id="selectOneByUnique" resultMap="BaseResultMap" parameterType="java.lang.String">
  	select*from t_migu_project_budget p where p.project_id=#{0} and p.budget_result_id=#{1}
  </select>
  
  <select id="selectOneById" resultMap="BaseResultMap" parameterType="java.lang.String">
  	select*from t_migu_project_budget p where  p.budget_result_id=#{0}
  </select>
  
  <delete id="deleteBySelective" parameterType="java.lang.String">
  	delete from t_migu_project_budget p where  p.budget_result_id=#{0}
  </delete>
  
  <select id="selectByEntity" resultMap="BaseResultMap" parameterType="cn.migu.income.pojo.MiguProjectBudget">
  	select * from (
  	select p.*,rownum r from t_migu_project_budget p where  p.project_id=#{projectId}
  	 <if test=" budgetProjectNumber != null">
      	and  p.BUDGET_PROJECT_NUMBER = #{budgetProjectNumber,jdbcType=VARCHAR}
     </if>
     <if test=" budgetProjectName != null">
    	and (p.BUDGET_PROJECT_NAME like concat(concat('%',#{budgetProjectName}),'%') ESCAPE '\')  
       
     </if>
     )  
     <![CDATA[where r > (#{page}-1) * #{rows}  and r<=#{page} * #{rows}]]>
  </select>
  
  <select id="selectCount" resultType="java.lang.Long"  parameterType="cn.migu.income.pojo.MiguProjectBudget">
  	select count(1) from (
  	select p.*,rownum r from t_migu_project_budget p where  p.project_id=#{ projectId}
  	 <if test=" budgetProjectNumber != null">
      	and  p.BUDGET_PROJECT_NUMBER = #{budgetProjectNumber,jdbcType=VARCHAR}
     </if>
     <if test=" budgetProjectName != null">
       and (p.BUDGET_PROJECT_NAME like concat(concat('%',#{budgetProjectName}),'%') ESCAPE '\')  
     </if>
     )  
  </select>
  
</mapper>